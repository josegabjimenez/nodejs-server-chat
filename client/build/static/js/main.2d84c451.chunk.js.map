{"version":3,"sources":["components/Hero.js","state.js","components/Card.js","components/CardGrid.js","pages/Home.js","pages/UserChats.js","pages/Chat.js","App.js","index.js"],"names":["Hero","title","subtitle","children","className","state","proxy","users","userChats","currentUserId","currentChatId","Card","id","email","button","route","alt","src","to","onClick","setCurrentUser","setCurrentChat","CardGrid","Home","snap","useSnapshot","getUsers","a","fetch","json","data","useEffect","length","map","user","_id","name","UserChats","getChats","chats","console","log","chat","socket","io","Message","text","direction","TextInput","sendText","onChange","value","type","placeholder","Chat","useState","chatInfo","setChatInfo","chatMessages","setChatMessages","messageToSend","setMessageToSend","getChat","sendMessage","fullMessage","message","method","headers","body","JSON","stringify","on","prevArray","e","target","handleChange","App","path","element","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2d84c451.chunk.js","sourcesContent":["import React from 'react';\n\nconst Hero = ({ title, subtitle, children }) => {\n\treturn (\n\t\t<main className=\"bg-base-100 w-full m-0 p-12 flex flex-col items-center rounded shadow-md\">\n\t\t\t<p className=\"text-4xl font-bold m-4\">{title}</p>\n\t\t\t<p className=\"text-1xl font-bold m-4\">{subtitle}</p>\n\t\t\t{children}\n\t\t</main>\n\t);\n};\n\nexport default Hero;\n","import { proxy } from 'valtio';\n\nconst state = proxy({\n\tusers: [],\n\tuserChats: [],\n\tcurrentUserId: '',\n\tcurrentChatId: '',\n});\n\nexport { state };\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { state } from '../state';\n\nconst Card = ({ id, title, email, button, route }) => {\n\tconst setCurrentUser = (id) => {\n\t\tstate.currentUserId = id;\n\t};\n\n\tconst setCurrentChat = (id) => {\n\t\tstate.currentChatId = id;\n\t};\n\n\treturn (\n\t\t<div className=\"card text-center shadow-md bg-white\">\n\t\t\t<figure className=\"px-2 pt-2\">\n\t\t\t\t<img\n\t\t\t\t\talt=\"Profile\"\n\t\t\t\t\tsrc=\"https://picsum.photos/id/1005/400/250\"\n\t\t\t\t\tclassName=\"rounded-xl\"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t<div className=\"card-body\">\n\t\t\t\t<h2 className=\"card-title\">{title}</h2>\n\t\t\t\t<p>{email}</p>\n\t\t\t\t<div className=\"justify-center card-actions\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={`/${route}`}\n\t\t\t\t\t\tclassName=\"btn btn-outline border-2 btn-primary btn-block\"\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\troute === 'user' ? setCurrentUser(id) : setCurrentChat(id)\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{button}\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Card;\n","import React from 'react';\n\nconst CardGrid = ({ children }) => {\n\treturn (\n\t\t<section className=\"grid gap-3 xl:gap-5 w-full grid-cols-1 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6\">\n\t\t\t{children}\n\t\t</section>\n\t);\n};\n\nexport default CardGrid;\n","import React, { useEffect } from 'react';\n//Components\nimport { Hero, Card, CardGrid } from '../components';\n\n// State\nimport { state } from '../state';\nimport { useSnapshot } from 'valtio';\n\nconst Home = () => {\n\tconst snap = useSnapshot(state);\n\n\tconst getUsers = async () => {\n\t\tconst users = await (await fetch('/api/user')).json();\n\t\tstate.users = users.data;\n\t};\n\n\tuseEffect(() => {\n\t\tgetUsers();\n\t}, []);\n\n\treturn (\n\t\t<Hero title=\"WELCOME TO MY MESSAGE APP\" subtitle=\"USERS:\">\n\t\t\t<CardGrid>\n\t\t\t\t{snap.users.length &&\n\t\t\t\t\tsnap.users.map((user) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tkey={user._id}\n\t\t\t\t\t\t\t\tid={user._id}\n\t\t\t\t\t\t\t\ttitle={user.name}\n\t\t\t\t\t\t\t\temail={user.email}\n\t\t\t\t\t\t\t\tbutton=\"Select User\"\n\t\t\t\t\t\t\t\troute=\"user\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</CardGrid>\n\t\t</Hero>\n\t);\n};\n\nexport default Home;\n","import React, { useEffect } from 'react';\n// Components\nimport { Hero, Card, CardGrid } from '../components';\n\n// State\nimport { state } from '../state';\nimport { useSnapshot } from 'valtio';\n\nconst UserChats = () => {\n\tconst snap = useSnapshot(state);\n\n\tconst getChats = async (id) => {\n\t\tstate.userChats = [];\n\t\tconst chats = await (await fetch(`/api/chat/${id}`)).json();\n\t\tstate.userChats = chats.data;\n\t};\n\n\tuseEffect(() => {\n\t\tconst id = snap.currentUserId;\n\t\tconsole.log(id);\n\t\tgetChats(id);\n\t}, [snap.currentUserId]);\n\n\treturn (\n\t\t<Hero>\n\t\t\t<CardGrid>\n\t\t\t\t{snap.userChats &&\n\t\t\t\t\tsnap.userChats.map((chat) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tkey={chat._id}\n\t\t\t\t\t\t\t\tid={chat._id}\n\t\t\t\t\t\t\t\tbutton=\"Let's chat\"\n\t\t\t\t\t\t\t\troute=\"chat\"\n\t\t\t\t\t\t\t\ttitle={`Chat con ${\n\t\t\t\t\t\t\t\t\tchat.users[0]._id === snap.currentUserId\n\t\t\t\t\t\t\t\t\t\t? chat.users[1].name\n\t\t\t\t\t\t\t\t\t\t: chat.users[0].name\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</CardGrid>\n\t\t</Hero>\n\t);\n};\n\nexport default UserChats;\n","import React, { useState, useEffect } from 'react';\n// SocketIO\nimport { io } from 'socket.io-client';\n\n// Components\n// import { Hero, Card, CardGrid } from '../components';\n\n// State\nimport { state } from '../state';\nimport { useSnapshot } from 'valtio';\n\nconst socket = io();\n\nconst Chat = () => {\n\tconst snap = useSnapshot(state);\n\tconst [chatInfo, setChatInfo] = useState();\n\tconst [chatMessages, setChatMessages] = useState([]);\n\tconst [messageToSend, setMessageToSend] = useState('');\n\n\tconst getChat = async (id) => {\n\t\tsetChatMessages([]);\n\t\tconst chatInfo = await (await fetch(`/api/chat/${id}`)).json();\n\t\tsetChatInfo(chatInfo.data[0]);\n\t\tconst chatMessages = await (await fetch(`/api/message?chat=${id}`)).json();\n\t\tsetChatMessages(chatMessages.data);\n\t};\n\n\tconst handleChange = (e) => {\n\t\tsetMessageToSend(e.target.value);\n\t};\n\n\tconst sendMessage = async () => {\n\t\tconst fullMessage = {\n\t\t\tchat: snap.currentChatId,\n\t\t\tuser: snap.currentUserId,\n\t\t\tmessage: messageToSend,\n\t\t};\n\n\t\tawait fetch('/api/message', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json; charset=UTF-8',\n\t\t\t},\n\t\t\tbody: JSON.stringify(fullMessage),\n\t\t});\n\t\tsetMessageToSend('');\n\t};\n\n\tuseEffect(() => {\n\t\t// Get Chats\n\t\tconst id = snap.currentChatId;\n\t\tconsole.log(id);\n\t\tgetChat(id);\n\n\t\t// Listen for new messages\n\t\tsocket.on(`${id}`, (data) => {\n\t\t\tconsole.log(data);\n\t\t\tsetChatMessages((prevArray) => [...prevArray, data]);\n\t\t});\n\t}, [snap.currentChatId]);\n\n\tuseEffect(() => {\n\t\tconsole.log(chatMessages);\n\t}, [chatMessages]);\n\n\treturn (\n\t\t<main className=\"w-full min-h-screen flex justify-center items-center md:text-2xl\">\n\t\t\t<section className=\"card shadow rounded-none max-h-full bg-white w-full md:w-4/5 md:rounded-2xl md:my-4\">\n\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t<h2 className=\"card-title\">\n\t\t\t\t\t\t{chatInfo\n\t\t\t\t\t\t\t? chatInfo.users[0]._id === snap.currentUserId\n\t\t\t\t\t\t\t\t? chatInfo.users[1].name\n\t\t\t\t\t\t\t\t: chatInfo.users[0].name\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t</h2>\n\t\t\t\t\t{chatMessages &&\n\t\t\t\t\t\tchatMessages.map((message) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t\tkey={message._id}\n\t\t\t\t\t\t\t\t\tuser={message.user.name}\n\t\t\t\t\t\t\t\t\ttext={message.message}\n\t\t\t\t\t\t\t\t\tdirection={\n\t\t\t\t\t\t\t\t\t\tmessage.user._id === snap.currentUserId ? 'right' : 'left'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tvalue={messageToSend}\n\t\t\t\t\t\tonChange={(e) => handleChange(e)}\n\t\t\t\t\t\tonClick={() => sendMessage()}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</main>\n\t);\n};\n\nconst Message = ({ user, text, direction }) => {\n\tif (direction === 'left') {\n\t\treturn (\n\t\t\t<div className=\"card shadow my-3 w-full bg-base-100 md:w-1/2 \">\n\t\t\t\t<div className=\"card-body p-4 \">\n\t\t\t\t\t<h2 className=\"card-title md:text-2xl\">{user}</h2>\n\t\t\t\t\t<p>{text}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"card shadow my-3 w-auto bg-primary md:w-1/2 md:self-end\">\n\t\t\t<div className=\"card-body text-right md:text-left p-4\">\n\t\t\t\t<h2 className=\"card-title md:text-2xl\">{user}</h2>\n\t\t\t\t<p>{text}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst TextInput = ({ sendText, onChange, onClick, value }) => {\n\treturn (\n\t\t<div className=\"form-control mt-8 \">\n\t\t\t<div className=\"flex space-x-2 \">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tplaceholder=\"Write something...\"\n\t\t\t\t\tclassName=\"w-full input input-primary input-bordered md:text-2xl md:h-20 md:p-10 \"\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"btn btn-neutral md:w-64 md:h-20 md:text-2xl\"\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t>\n\t\t\t\t\tSend\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Chat;\n","import React from 'react';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport Home from './pages/Home';\nimport UserChats from './pages/UserChats';\nimport Chat from './pages/Chat';\nimport './App.css';\n\nfunction App() {\n\treturn (\n\t\t<BrowserRouter>\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/\" element={<Home />} />\n\t\t\t\t<Route path=\"/user\" element={<UserChats />} />\n\t\t\t\t<Route path=\"/chat\" element={<Chat />} />\n\t\t\t</Routes>\n\t\t</BrowserRouter>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}